'use strict';var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_promise=require('babel-runtime/core-js/promise'),_promise2=_interopRequireDefault(_promise),_localforage=require('localforage'),_localforage2=_interopRequireDefault(_localforage);Object.defineProperty(exports,'__esModule',{value:!0}),exports.key=exports.keys=exports.flush=exports.forget=exports.deleter=exports.remove=exports.rememberForever=exports.remember=exports.has=exports.forever=exports.add=exports.put=exports.set=exports.pull=exports.get=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var get=exports.get=function(a){var b=1<arguments.length&&arguments[1]!==void 0&&arguments[1];return new _promise2.default(function(c,d){_localforage2.default.getItem(a).then(function(e){var f=b;e&&(e.minutes>new Date().getTime()||0==e.minutes)&&(f=e.data),c(f)}).catch(function(e){d(e)})})},pull=exports.pull=function(a){var b=get(a);return remove(a),b},set=exports.set=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;return new _promise2.default(function(d,e){_localforage2.default.setItem(a,{data:b,minutes:expiryTime(c)}).then(function(f){d(f.data)}).catch(function(f){e(f)})})},put=exports.put=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;return set(a,b,c)},add=exports.add=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;return set(a,b,c)},forever=exports.forever=function(a,b){return set(a,b,0)},has=exports.has=function(a){return new _promise2.default(function(b,c){get(a).then(function(d){b(!!d)}).catch(function(d){c(d)})})},remember=exports.remember=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function b(c,d){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;return _regenerator2.default.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,has(c);case 2:if(!g.sent){g.next=6;break}return g.abrupt('return',get(c));case 6:return g.abrupt('return',set(c,d,e));case 7:case'end':return g.stop();}},b,void 0)}));return function(){return a.apply(this,arguments)}}(),rememberForever=exports.rememberForever=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function b(c,d){return _regenerator2.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,has(c);case 2:if(!f.sent){f.next=6;break}return f.abrupt('return',get(c));case 6:return f.abrupt('return',set(c,d,0));case 7:case'end':return f.stop();}},b,void 0)}));return function(){return a.apply(this,arguments)}}(),remove=exports.remove=function(a){return new _promise2.default(function(b,c){_localforage2.default.removeItem(a).then(function(){b()}).catch(function(d){c(d)})})},deleter=exports.deleter=function(a){return remove(a)},forget=exports.forget=function(a){return remove(a)},flush=exports.flush=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function b(){var c;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,keys();case 2:c=e.sent,c.forEach(function(f){return remove(f)});case 4:case'end':return e.stop();}},b,void 0)}));return function(){return a.apply(this,arguments)}}(),keys=exports.keys=function(){return new _promise2.default(function(a,b){_localforage2.default.keys().then(function(c){a(c)}).catch(function(c){b(c)})})},key=exports.key=function(){return new _promise2.default(function(a,b){_localforage2.default.key(keyIndex).then(function(c){a(c)}).catch(function(c){b(c)})})},expiryTime=function(a){return a?new Date().getTime()+1e3*(60*a):a};
